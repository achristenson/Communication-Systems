clear all, close all
%Image Pre-processing (from hw7)
load trees
Z = ind2gray(X(1:200,1:200), gray); %convert to grayscale
m = size(Z,1);  %number of rows
n = size(Z,2);  %number of columns
figure
subplot(2,2,1)
imshow(Z);  %plot image
title('Imported image')
avg_power = (1/numel(Z)) * sum(sum(Z^2));   %average signal power
fun = @(x) dct2(x.data);
fun2 = @(y) idct2(y.data); 

B = blockproc(Z,[8 8],fun);
minB = min(min(B));
B = B - minB;       %scale linearly so that minB -> 0
maxB = max(max(B));
B = B / maxB;       %   and maxB ->1 

B_3d = reshape(B, [8 8 m*n/64]); %reshaped 3D matrix of DCT blocks